<!doctype html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
    <meta name="baidu-site-verification" content="dIcXMeY8Ya">
    
    <title>滴滴全平台框架Chameleon | alanJiang</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="keywords" content="alanJiang, 前端, Web, 江鹏, 后端开发, app, 小程序">
    <meta name="description" content="alanJiang个人前端小站">

    
    <link rel="alternative" href="/atom.xml" title="alanJiang" type="application/atom+xml">
    
    
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->
    
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?fd459238242776d173cdc64918fb32f2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>
</html>
<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">alanJiang</span>
                    <span class="description">alanJiang的个人博客网站</span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/cml/index.html" class="item ">
                <a href="/" title="首页" class="icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/cml/index.html" class="item ">
                <a href="/lab/" title="实验室" class="icon-lab">&nbsp;实验室</a>
            </li>
            
            <li rel="/cml/index.html" class="item current">
                <a href="/cml/" title="滴滴chameleon" class="icon-lab">&nbsp;滴滴chameleon</a>
            </li>
            
            <li rel="/cml/index.html" class="item ">
                <a href="/about/" title="关于我" class="icon-about">&nbsp;关于我</a>
            </li>
            
            <li rel="/cml/index.html" class="item ">
                <a href="/comment/" title="留言" class="icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/alanjiang1129" target="_blank">Github</a>
                        |
                    
                        <a href="https://www.jianshu.com/u/23da71227054" target="_blank">简书</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="https://weibo.com/5533052073/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo" class="sinaweibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="/qq" class="qq" target="_blank"><b>■</b> QQ</a>
                    
                        <a href="https://i.csdn.net/#/uc/profile" class="csdn" target="_blank"><b>■</b> CSDN</a>
                    
                    <!--<a href="javascript: void(0);" class="wechat">-->
                        <!--<b>■</b>-->
                        <!--公众号-->
                        <!--<span class="popover">-->
                            <!--<img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">-->
                            <!--<i class="arrow"></i>-->
                        <!--</span>-->
                    <!--</a>-->
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/assets/tx.jpg" alt="avatar" title="Jelon">
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 独立页面 -->
<article class="post article">
    <header class="text-center">
        <h4 class="post-title"><a href="javascript: void(0);">滴滴全平台框架Chameleon</a></h4>
    </header>
    <div class="post-content">
        
            <h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><p><a href="https://cmljs.org/doc/component/component.html" target="_blank" rel="noopener">官方文档</a></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><blockquote>
<p>npm i -g chameleon-tool<br>全局安装chameleon工具</p>
</blockquote>
<blockquote>
<p>cml -v<br>cml -h</p>
</blockquote>
<blockquote>
<p>cml init project<br>创建项目与启动</p>
</blockquote>
<blockquote>
<p>cml dev<br>创建项目与启动</p>
</blockquote>
<blockquote>
<p>cml init page<br>创建新页面</p>
</blockquote>
<blockquote>
<pre><code>cml init component
first-com
</code></pre><p>创建及引用组件</p>
</blockquote>
<blockquote>
<pre><code>&lt;template&gt;
  &lt;view&gt;
     &lt;first-com&gt;&lt;/first-com&gt;
   &lt;/view&gt;
 &lt;/template&gt;
</code></pre></blockquote>
<hr>
<h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><blockquote>
<pre><code>├── chameleon.config.js                 // 项目的配置文件
├── dist                                // 打包产出目录
├── mock                                // 模拟数据目录
├── node_modules                        // npm包依赖
├── package.json
└── src                                 // 项目源代码
    ├── app                             // app启动入口
    ├── components                      // 组件文件夹
    ├── pages                           // 页面文件夹
    ├── router.config.json              // 路由配置文件
    └── store                           // 全局状态管理
</code></pre></blockquote>
<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>在router.config.json文件中配置</p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><h4 id="属性类型"><a href="#属性类型" class="headerlink" title="属性类型"></a>属性类型</h4><pre><code>类型    描述    注解
String    字符串    `&quot;string&quot;`
Number    数字    `1, 1.5`
Boolean    布尔值    `true，false`
Array    数组    `[1, &apos;string&apos;]`
Object    对象    `{key: value}`
EventHandler    事件处理函数名    `handlerName`是组件中定义的事件处理函数名
</code></pre><h4 id="公共属性"><a href="#公共属性" class="headerlink" title="公共属性"></a>公共属性</h4><pre><code>属性名    类型    描述    注解
id    String    组件唯一标示    保证整个页面唯一
class    String    组件样式类名    在cmss中定义的样式类
style    String    组件内联样式    可动态设置内联样式
c-bind    EventHandler    组件事件    
</code></pre><h3 id="视图层"><a href="#视图层" class="headerlink" title="视图层"></a>视图层</h3><p>视图层由 CML 与 CMSS 编写</p>
<h4 id="CMSS"><a href="#CMSS" class="headerlink" title="CMSS"></a>CMSS</h4><p><code>cmss写在.cml文件中的&lt;style&gt;标签内</code></p>
<h5 id="class"><a href="#class" class="headerlink" title="class"></a>class</h5><h6 id="静态class"><a href="#静态class" class="headerlink" title="静态class"></a>静态class</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;kind-list-item-hd-show class2 class3&quot;&gt;&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<h6 id="动态class"><a href="#动态class" class="headerlink" title="动态class"></a>动态class</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">目前 class 不支持传入对象的形式； 简单数据绑定 &#123;&#123;&#125;&#125;之内的会被当做一个表达式去处理；</span><br><span class="line"></span><br><span class="line">&lt;view&gt;&lt;text class=&quot;\&#123;\&#123;prefix+&apos;a&apos;\&#125;\&#125;&quot;&gt;class数据绑定&lt;/text&gt;&lt;/view&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">class Index &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      prefix: &apos;cls&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default new Index();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h6 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;static&quot; class=&quot;\&#123;\&#123;open ? &apos;cls1 cls2&apos; : &apos;cls3 cls4&apos;\&#125;\&#125;&quot;&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"> ```   </span><br><span class="line"></span><br><span class="line">##### 布局</span><br><span class="line">&gt; 与css差不多</span><br><span class="line"></span><br><span class="line">##### 盒子模型</span><br><span class="line">&gt; 与css差不多</span><br><span class="line"></span><br><span class="line">##### 样式的多态</span><br><span class="line">cml在不同平台的样式</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    @media cml-type (支持的平台) &#123;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    .common &#123;</span><br><span class="line">      /**/</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line"></span><br><span class="line">类型有:</span><br><span class="line">&gt;   - web</span><br><span class="line">&gt;   - weex</span><br><span class="line">&gt;   - wx</span><br><span class="line">&gt;   - alipay</span><br><span class="line">&gt;   - baidu</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">&gt;   @media cml-type (web) &#123;</span><br><span class="line">      .class1 &#123;</span><br><span class="line">        color: red;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">因为多态只能在cml文件中使用,如果想使用在.css文件中,如果需要使用其他文件中引用进来,可以:</span><br><span class="line"></span><br><span class="line">    &lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">    @media cml-type (web) &#123;</span><br><span class="line">      @import &quot;./style1.less&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    @media cml-type (weex) &#123;</span><br><span class="line">      @import &quot;./style2.less&quot;;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    @media cml-type (wx,alipay,baidu) &#123;</span><br><span class="line">      @import &quot;./style3.less&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">#### CML-标准语法</span><br><span class="line"></span><br><span class="line">#### CML-类VUE语法</span><br><span class="line">&gt;   模板添加一个lang属性&lt;template lang=&quot;vue&quot;&gt;</span><br><span class="line"></span><br><span class="line">### 逻辑层</span><br><span class="line">#### 生命周期</span><br><span class="line">钩子|执行时机|详细</span><br><span class="line">:-|:-|:-</span><br><span class="line">beforeCreate|实例初始化之后，数据和方法挂在到实例之前 一个页面只会返回一次|在该生命周期回调函数中会返回传入当前页面的参数对象</span><br><span class="line">created|	数据及方法挂载完成|</span><br><span class="line">beforeMount|开始挂载已经编译完成的cml到对应的节点时|</span><br><span class="line">mounted|cml模板编译完成,且渲染到dom中完成|</span><br><span class="line">beforeDestroy|实例销毁之前|</span><br><span class="line">destroyed|	实例销毁后|</span><br><span class="line">#### 计算属性computed</span><br><span class="line">&gt; 就是一个方法,可以对一个值,或者进行逻辑处理之后,再返回给页面</span><br></pre></td></tr></table></figure>
<text>Computed reversed message: ““</text>

<p>class Index {<br>  data = {<br>    message: ‘Hello’<br>  }<br>  computed = {<br>    // 计算属性的 getter<br>    reversedMessage: function () {<br>      return this.message.split(‘’).reverse().join(‘’)<br>    }<br>  }<br>};<br>export default new Index();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#### 侦听属性 watch</span><br></pre></td></tr></table></figure></p>
<p><text>fullName is : ““</text><br>class Index {<br>  data = {<br>    firstName: ‘Foo’,<br>    lastName: ‘Bar’,<br>    fullName: ‘Foo Bar’<br>  }<br>  watch = {<br>    firstName: function (newV, oldV) {<br>      this.fullName = newV + ‘ ‘ + this.lastName<br>    },<br>    lastName: function (newV, oldV) {<br>      this.fullName = this.firstName + ‘ ‘ + newV<br>    }<br>  }<br>};<br>export default new Index();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#### 数据管理</span><br><span class="line">&gt;   chameleon-store 提供集中管理数据的能力。</span><br><span class="line"></span><br><span class="line">- state</span><br><span class="line">- getters</span><br><span class="line">- mutation</span><br><span class="line">- action</span><br><span class="line">- 子模块</span><br><span class="line"></span><br><span class="line">##### 简单开始</span><br><span class="line">1. 创建 store，并且提供一个初始 state 对象和一些 mutation：</span><br></pre></td></tr></table></figure></p>
<p>import createStore from ‘chameleon-store’<br>const store = createStore({<br>  state: {<br>    count: 0<br>  },<br>  mutations: {<br>    increment (state) {<br>      state.count++<br>    }<br>  }<br>})<br>export default store<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. 通过 store.state 来获取状态对象，以及通过 store.commit 方法触发状态变更：</span><br></pre></td></tr></table></figure></p>
<p>store.commit(‘increment’)</p>
<p>console.log(store.state.count) // -&gt; 1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">### 配置</span><br><span class="line">针对项目、组件、路由等的特定配置，以满足各种方式的需求</span><br><span class="line"></span><br><span class="line">#### 组件配置</span><br><span class="line">组件的配置以json对象的格式配置在.cml文件中，结构如下：</span><br><span class="line"></span><br><span class="line">#### 路由配置</span><br><span class="line">chameleon项目内置了一套各端统一的路由管理方式</span><br><span class="line"></span><br><span class="line">`src/router.config.json是路由的配置文件,内容如下：`</span><br></pre></td></tr></table></figure></p>
<p>  “mode”: “history”,<br>  “domain”: “<a href="https://www.chameleon.com&quot;" target="_blank" rel="noopener">https://www.chameleon.com&quot;</a>,<br>  “routes”:[<br>    {<br>      “url”: “/cml/h5/index”,<br>      “path”: “/pages/index/index”,<br>      “mock”: “index.php”<br>    }<br>  ]<br>}<br><code>`</code></p>
<ul>
<li>mode 为web端路由模式，分为hash或history。</li>
<li>domain 为web端地址的域名。</li>
<li>routes 为路由配置<ul>
<li>path为路由对应的cml文件的路径,以src目录下开始的绝对路径，以/开头。</li>
<li>url为web端的访问路径。</li>
<li>mock为该路由对应的mock文件(仅模拟模板下发需要)。<h4 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h4>本文档描述了项目配置的全部参数及使用方法。<br>chameleon的构建过程是配置化的，项目的根目录下提供一个chameleon.config.js文件，在该文件中可以使用全局对象cml的api去操作配置对象。例如：</li>
</ul>
</li>
</ul>

        
    </div>
</article>
            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/个博搭建/">个博搭建</a>
        <span class="badge">(6)</span>
    </li>
    
    <li>
        <a href="/categories/GitHub/">GitHub</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="/categories/SpringBoot/">SpringBoot</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="/categories/Docker/">Docker</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/开源项目/">开源项目</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/学习总结/">学习总结</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/Git/">Git</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/VUE/">VUE</a>
        <span class="badge">(2)</span>
    </li>
    
    <li>
        <a href="/categories/Node/">Node</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/JS/">JS</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/HEXO/" title="HEXO">HEXO (5)</a>
  
    <a class="tag-item" href="/tags/HEXO-GitHub个博/" title="HEXO_GitHub个博">HEXO_GitHub个博 (6)</a>
  
    <a class="tag-item" href="/tags/GitHub/" title="GitHub">GitHub (2)</a>
  
    <a class="tag-item" href="/tags/静态文件托管/" title="静态文件托管">静态文件托管 (1)</a>
  
    <a class="tag-item" href="/tags/SpringBoot/" title="SpringBoot">SpringBoot (2)</a>
  
    <a class="tag-item" href="/tags/MarkDown/" title="MarkDown">MarkDown (1)</a>
  
    <a class="tag-item" href="/tags/Docker/" title="Docker">Docker (1)</a>
  
    <a class="tag-item" href="/tags/GitLab/" title="GitLab">GitLab (1)</a>
  
    <a class="tag-item" href="/tags/vue/" title="vue">vue (1)</a>
  
    <a class="tag-item" href="/tags/java/" title="java">java (1)</a>
  
    <a class="tag-item" href="/tags/学习总结/" title="学习总结">学习总结 (1)</a>
  
    <a class="tag-item" href="/tags/Git/" title="Git">Git (1)</a>
  
    <a class="tag-item" href="/tags/VUE/" title="VUE">VUE (2)</a>
  
    <a class="tag-item" href="/tags/Yarn/" title="Yarn">Yarn (1)</a>
  
    <a class="tag-item" href="/tags/Node/" title="Node">Node (1)</a>
  
    <a class="tag-item" href="/tags/JS/" title="JS">JS (1)</a>
  
    <a class="tag-item" href="/tags/JS数据类型/" title="JS数据类型">JS数据类型 (1)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="http://admin.yd-park.com" target="_blank" title="易的官网">易的官网</a>
        </li>
    
        <li>
            <a href="http://admin.yd-park.com:8090" target="_blank" title="易的管理平台">易的管理平台</a>
        </li>
    
        <li>
            <a href="http://admin.yd-park.com:8092" target="_blank" title="易的数据大屏">易的数据大屏</a>
        </li>
    
        <li>
            <a href="https://www.baidu.com" target="_blank" title="百度搜索">百度</a>
        </li>
    
        <li>
            <a href="https://cn.bing.com/" target="_blank" title="必应搜索">必应</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2016-2019
    A

    <a href="/">lanJiang Thank You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
</body>
</html>